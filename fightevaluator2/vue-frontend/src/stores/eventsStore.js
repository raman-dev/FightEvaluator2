import { defineStore } from "pinia"
import server from "@/plugins/server";
import { ref,inject } from "vue";

export const useEventsStore = defineStore('eventsStore',()=>{
    const eventsData = ref({})
    const server = inject('server');
    const sampleFetchResult = {"events":[{"year":2025,"months":[{"month":12,"events":[]},{"month":11,"events":[]},{"month":10,"events":[]},{"month":9,"events":[]},{"month":8,"events":[{"id":120,"title":"UFC Fight Night: Dolidze vs. Hernandez","date":"2025-08-09","location":null,"link":"https://www.tapology.com/fightcenter/events/127957-ufc-fight-night","hasResults":false},{"id":119,"title":"UFC Fight Night: Albazi vs. Taira","date":"2025-08-02","location":null,"link":"https://www.tapology.com/fightcenter/events/127934-ufc-fight-night","hasResults":true}]},{"month":7,"events":[{"id":118,"title":"UFC Fight Night: Whittaker vs. de Ridder","date":"2025-07-26","location":null,"link":"https://www.tapology.com/fightcenter/events/125931-ufc-fight-night","hasResults":true},{"id":117,"title":"UFC 318: Holloway vs. Poirier 3","date":"2025-07-19","location":null,"link":"https://www.tapology.com/fightcenter/events/127441-ufc-318","hasResults":true},{"id":116,"title":"UFC Fight Night: Lewis vs. Teixeira","date":"2025-07-12","location":null,"link":"https://www.tapology.com/fightcenter/events/126523-ufc-fight-night","hasResults":true}]},{"month":6,"events":[{"id":115,"title":"UFC 317: Topuria vs. Oliveira","date":"2025-06-28","location":null,"link":"https://www.tapology.com/fightcenter/events/124086-ufc-317","hasResults":true},{"id":114,"title":"UFC Fight Night: Hill vs. Rountree","date":"2025-06-21","location":null,"link":"https://www.tapology.com/fightcenter/events/125838-ufc-fight-night","hasResults":true},{"id":113,"title":"UFC Fight Night: Usman vs. Buckley","date":"2025-06-14","location":null,"link":"https://www.tapology.com/fightcenter/events/125944-ufc-fight-night","hasResults":true},{"id":112,"title":"UFC 316: Dvalishvili vs. O'Malley 2","date":"2025-06-07","location":null,"link":"https://www.tapology.com/fightcenter/events/124620-ufc-316","hasResults":true}]},{"month":5,"events":[{"id":111,"title":"UFC Fight Night: Blanchfield vs. Barber","date":"2025-05-31","location":null,"link":"https://www.tapology.com/fightcenter/events/123251-ufc-fight-night","hasResults":true},{"id":110,"title":"UFC Fight Night: Burns vs. Morales","date":"2025-05-17","location":null,"link":"https://www.tapology.com/fightcenter/events/124622-ufc-fight-night","hasResults":true},{"id":109,"title":"UFC 315: Muhammad vs. Della Maddalena","date":"2025-05-10","location":null,"link":"https://www.tapology.com/fightcenter/events/123873-ufc-315","hasResults":true},{"id":108,"title":"UFC Fight Night: Sandhagen vs. Figueiredo","date":"2025-05-03","location":null,"link":"https://www.tapology.com/fightcenter/events/123376-ufc-fight-night","hasResults":true}]},{"month":4,"events":[{"id":107,"title":"UFC Fight Night: Machado Garry vs. Prates","date":"2025-04-26","location":null,"link":"https://www.tapology.com/fightcenter/events/123603-ufc-fight-night","hasResults":true},{"id":106,"title":"UFC 314: Volkanovski vs. Lopes","date":"2025-04-12","location":null,"link":"https://www.tapology.com/fightcenter/events/122989-ufc-314","hasResults":true},{"id":105,"title":"UFC Fight Night: Emmett vs. Murphy","date":"2025-04-05","location":null,"link":"https://www.tapology.com/fightcenter/events/122672-ufc-fight-night","hasResults":true}]},{"month":3,"events":[{"id":104,"title":"UFC Fight Night: Moreno vs. Erceg","date":"2025-03-29","location":null,"link":"https://www.tapology.com/fightcenter/events/120490-ufc-fight-night","hasResults":true},{"id":103,"title":"UFC Fight Night: Edwards vs. Brady","date":"2025-03-22","location":null,"link":"https://www.tapology.com/fightcenter/events/120214-ufc-fight-night","hasResults":true},{"id":102,"title":"UFC Fight Night: Vettori vs. Dolidze 2","date":"2025-03-15","location":null,"link":"https://www.tapology.com/fightcenter/events/120489-ufc-fight-night","hasResults":true},{"id":101,"title":"UFC 313: Pereira vs. Ankalaev","date":"2025-03-08","location":null,"link":"https://www.tapology.com/fightcenter/events/120488-ufc-313","hasResults":true},{"id":96,"title":"UFC Fight Night: Kape vs. Almabayev","date":"2025-03-01","location":null,"link":"https://www.tapology.com/fightcenter/events/120055-ufc-fight-night","hasResults":true}]},{"month":2,"events":[{"id":92,"title":"UFC Fight Night: Cejudo vs. Song","date":"2025-02-22","location":null,"link":"https://www.tapology.com/fightcenter/events/120012-ufc-fight-night","hasResults":true},{"id":91,"title":"UFC Fight Night: Cannonier vs. Rodrigues","date":"2025-02-15","location":null,"link":"https://www.tapology.com/fightcenter/events/120487-ufc-fight-night","hasResults":true},{"id":90,"title":"UFC 312: Du Plessis vs. Strickland 2","date":"2025-02-08","location":null,"link":"https://www.tapology.com/fightcenter/events/119136-ufc-312","hasResults":true},{"id":89,"title":"UFC Fight Night: Adesanya vs. Imavov","date":"2025-02-01","location":null,"link":"https://www.tapology.com/fightcenter/events/119459-ufc-fight-night","hasResults":true}]},{"month":1,"events":[{"id":88,"title":"UFC 311: Makhachev vs. Tsarukyan 2","date":"2025-01-18","location":null,"link":"https://www.tapology.com/fightcenter/events/118600-ufc-311","hasResults":true},{"id":87,"title":"UFC Fight Night: Dern vs. Ribas 2","date":"2025-01-11","location":null,"link":"https://www.tapology.com/fightcenter/events/118450-ufc-fight-night","hasResults":true}]},{"month":0,"events":[]}]},{"year":2024,"months":[{"month":12,"events":[{"id":86,"title":"UFC Fight Night: Covington vs. Buckley","date":"2024-12-14","location":null,"link":"https://www.tapology.com/fightcenter/events/116905-ufc-fight-night","hasResults":false},{"id":85,"title":"UFC 310: Pantoja vs. Asakura","date":"2024-12-07","location":null,"link":"https://www.tapology.com/fightcenter/events/116766-ufc-310","hasResults":true}]},{"month":11,"events":[{"id":69,"title":"UFC Fight Night: Yan vs. Figueiredo","date":"2024-11-23","location":null,"link":"https://www.tapology.com/fightcenter/events/116899-ufc-fight-night","hasResults":true},{"id":68,"title":"UFC 309: Jones vs. Miocic","date":"2024-11-16","location":null,"link":"https://www.tapology.com/fightcenter/events/116669-ufc-309","hasResults":true},{"id":67,"title":"UFC Fight Night: Magny vs. Prates","date":"2024-11-09","location":null,"link":"https://www.tapology.com/fightcenter/events/116440-ufc-fight-night","hasResults":true},{"id":66,"title":"UFC Fight Night: Moreno vs. Albazi","date":"2024-11-02","location":null,"link":"https://www.tapology.com/fightcenter/events/116421-ufc-fight-night","hasResults":true}]},{"month":10,"events":[{"id":65,"title":"UFC 308: Topuria vs. Holloway","date":"2024-10-26","location":null,"link":"https://www.tapology.com/fightcenter/events/112501-ufc-308","hasResults":true},{"id":64,"title":"UFC Fight Night: Pereira vs. Hernandez","date":"2024-10-19","location":null,"link":"https://www.tapology.com/fightcenter/events/116368-ufc-fight-night","hasResults":true},{"id":63,"title":"UFC Fight Night: Royval vs. Taira","date":"2024-10-12","location":null,"link":"https://www.tapology.com/fightcenter/events/115961-ufc-fight-night","hasResults":true},{"id":62,"title":"UFC 307: Pereira vs. Rountree","date":"2024-10-05","location":null,"link":"https://www.tapology.com/fightcenter/events/116146-ufc-307","hasResults":true}]},{"month":9,"events":[{"id":61,"title":"UFC Fight Night: Moicano vs. Saint-Denis","date":"2024-09-28","location":null,"link":"https://www.tapology.com/fightcenter/events/111674-ufc-fight-night","hasResults":true},{"id":58,"title":"UFC 306: O'Malley vs. Dvalishvili","date":"2024-09-14","location":null,"link":"https://www.tapology.com/fightcenter/events/110826-ufc-306","hasResults":true},{"id":57,"title":"UFC Fight Night: Burns vs. Brady","date":"2024-09-07","location":null,"link":"https://www.tapology.com/fightcenter/events/114678-ufc-fight-night","hasResults":true}]},{"month":8,"events":[{"id":56,"title":"UFC Fight Night: Cannonier vs. Borralho","date":"2024-08-24","location":null,"link":"https://www.tapology.com/fightcenter/events/114902-ufc-fight-night","hasResults":true},{"id":55,"title":"UFC 305: Du Plessis vs. Adesanya","date":"2024-08-17","location":null,"link":"https://www.tapology.com/fightcenter/events/111885-ufc-305","hasResults":true},{"id":54,"title":"UFC Fight Night: Tybura vs. Spivac 2","date":"2024-08-10","location":null,"link":"https://www.tapology.com/fightcenter/events/112784-ufc-fight-night","hasResults":true},{"id":53,"title":"UFC Fight Night: Sandhagen vs. Nurmagomedov","date":"2024-08-03","location":null,"link":"https://www.tapology.com/fightcenter/events/111167-ufc-fight-night","hasResults":true}]},{"month":7,"events":[{"id":52,"title":"UFC 304: Edwards vs. Muhammad 2","date":"2024-07-27","location":null,"link":"https://www.tapology.com/fightcenter/events/112936-ufc-304","hasResults":true},{"id":50,"title":"UFC Fight Night: Lemos vs. Jandiroba","date":"2024-07-20","location":null,"link":"https://www.tapology.com/fightcenter/events/112783-ufc-fight-night","hasResults":true},{"id":49,"title":"UFC Fight Night: Namajunas vs. Cortez","date":"2024-07-13","location":null,"link":"https://www.tapology.com/fightcenter/events/111798-ufc-fight-night","hasResults":true}]},{"month":6,"events":[{"id":47,"title":"UFC 303: Pereira vs. Procházka 2","date":"2024-06-29","location":null,"link":"https://www.tapology.com/fightcenter/events/109011-ufc","hasResults":true},{"id":46,"title":"UFC Fight Night: Whittaker vs. Aliskerov","date":"2024-06-22","location":null,"link":"https://www.tapology.com/fightcenter/events/109963-ufc-fight-night","hasResults":true},{"id":45,"title":"UFC Fight Night: Perez vs. Taira","date":"2024-06-15","location":null,"link":"https://www.tapology.com/fightcenter/events/111669-ufc-fight-night","hasResults":true},{"id":44,"title":"UFC Fight Night: Cannonier vs. Imavov","date":"2024-06-08","location":null,"link":"https://www.tapology.com/fightcenter/events/111458-ufc-fight-night","hasResults":true},{"id":43,"title":"UFC 302: Makhachev vs. Poirier","date":"2024-06-01","location":null,"link":"https://www.tapology.com/fightcenter/events/110366-ufc-302","hasResults":true}]},{"month":5,"events":[{"id":42,"title":"UFC Fight Night: Barboza vs. Murphy","date":"2024-05-18","location":null,"link":"https://www.tapology.com/fightcenter/events/110359-ufc-fight-night","hasResults":true},{"id":41,"title":"UFC Fight Night: Lewis vs. Nascimento","date":"2024-05-11","location":null,"link":"https://www.tapology.com/fightcenter/events/110365-ufc-fight-night","hasResults":true},{"id":40,"title":"UFC 301: Pantoja vs. Erceg","date":"2024-05-04","location":null,"link":"https://www.tapology.com/fightcenter/events/109604-ufc-fight-night","hasResults":true}]},{"month":4,"events":[{"id":36,"title":"UFC Fight Night: Nicolau vs. Perez","date":"2024-04-27","location":null,"link":"https://www.tapology.com/fightcenter/events/109627-ufc-fight-night","hasResults":false},{"id":35,"title":"UFC 300: Pereira vs. Hill","date":"2024-04-13","location":"Las Vegas, Nevada, United States","link":"https://www.tapology.com/fightcenter/events/108579-ufc-300","hasResults":false},{"id":34,"title":"UFC Fight Night: Allen vs. Curtis 2","date":"2024-04-06","location":null,"link":"https://www.tapology.com/fightcenter/events/108721-ufc-fight-night","hasResults":false}]},{"month":3,"events":[{"id":31,"title":"UFC Fight Night: Blanchfield vs. Fiorot","date":"2024-03-30","location":null,"link":"https://www.tapology.com/fightcenter/events/107896-ufc-fight-night","hasResults":false},{"id":30,"title":"UFC Fight Night: Ribas vs. Namajunas","date":"2024-03-23","location":null,"link":"https://www.tapology.com/fightcenter/events/108462-ufc-fight-night","hasResults":false},{"id":29,"title":"UFC Fight Night: Tuivasa vs. Tybura","date":"2024-03-16","location":null,"link":"https://www.tapology.com/fightcenter/events/108288-ufc-fight-night","hasResults":false},{"id":27,"title":"UFC 299: O'Malley vs. Vera 2","date":"2024-03-09","location":"Miami, Florida, United States","link":"https://www.tapology.com/fightcenter/events/107061-ufc-299","hasResults":false},{"id":23,"title":"UFC Fight Night: Rozenstruik vs. Gaziev","date":"2024-03-02","location":null,"link":"https://www.tapology.com/fightcenter/events/106064-ufc-fight-night","hasResults":false}]},{"month":2,"events":[{"id":18,"title":"UFC Fight Night: Moreno vs. Royval 2","date":"2024-02-24","location":null,"link":"https://www.tapology.com/fightcenter/events/107471-ufc-fight-night","hasResults":false},{"id":17,"title":"UFC 298: Volkanovski vs. Topuria","date":"2024-02-17","location":null,"link":"https://www.tapology.com/fightcenter/events/107060-ufc-298","hasResults":false},{"id":16,"title":"UFC Fight Night: Hermansson vs. Pyfer","date":"2024-02-10","location":null,"link":"https://www.tapology.com/fightcenter/events/107367-ufc-fight-night","hasResults":false},{"id":15,"title":"UFC Fight Night: Dolidze vs. Imavov","date":"2024-02-03","location":null,"link":"https://www.tapology.com/fightcenter/events/106801-ufc-fight-night","hasResults":false}]},{"month":1,"events":[{"id":14,"title":"UFC 297: Strickland vs. Du Plessis","date":"2024-01-20","location":null,"link":"https://www.tapology.com/fightcenter/events/105840-ufc-297","hasResults":false},{"id":13,"title":"UFC Fight Night: Ankalaev vs. Walker","date":"2024-01-13","location":null,"link":"https://www.tapology.com/fightcenter/events/105485-ufc-fight-night","hasResults":true}]},{"month":0,"events":[]}]},{"year":2023,"months":[{"month":12,"events":[{"id":8,"title":"UFC 296: Edwards vs. Covington","date":"2023-12-16","location":"Las Vegas, Nevada, United States","link":"https://www.tapology.com/fightcenter/events/108579-ufc-300","hasResults":false},{"id":7,"title":"UFC Fight Night: Song vs. Gutierrez","date":"2023-12-09","location":"Last Vegas, Nevada, United States","link":"https://www.tapology.com/fightcenter/events/105194-ufc-fight-night","hasResults":false},{"id":6,"title":"UFC Fight Night: Dariush vs. Tsarukyan","date":"2023-12-02","location":"Endeavor","link":"https://www.tapology.com/fightcenter/events/104486-ufc-fight-night","hasResults":false}]},{"month":11,"events":[{"id":5,"title":"UFC Fight Night: Allen vs. Craig","date":"2023-11-18","location":"Las Vegas, Nevada, United States","link":"https://www.tapology.com/fightcenter/fighters/91516-brendan-allen","hasResults":false},{"id":4,"title":"UFC 295: Procházka vs. Pereira","date":"2023-11-11","location":"New York City, New York, United States","link":"https://www.tapology.com/fightcenter/events/102959-ufc-295-jones-vs-miocic","hasResults":false}]},{"month":10,"events":[]},{"month":9,"events":[]},{"month":8,"events":[]},{"month":7,"events":[]},{"month":6,"events":[]},{"month":5,"events":[]},{"month":4,"events":[]},{"month":3,"events":[]},{"month":2,"events":[]},{"month":1,"events":[]},{"month":0,"events":[]}]}]}
    


    function onReceiveData(data){
        // eventsData.value = data;
        //filter into what events by month
        //change events_yearMonth to a list of objects
        eventsData.value = data;
        /*
            data structure

            events:[
                {
                    year: y
                    months:  [
                        {month: i, events: events.sorted.reverse}
                ]},...
            ]
            
        */
    }

    async function fetchEvents(){
        server.get_all_events(onReceiveData)
        // onReceiveData(sampleFetchResult);
    }

    return {eventsData, fetchEvents}
});